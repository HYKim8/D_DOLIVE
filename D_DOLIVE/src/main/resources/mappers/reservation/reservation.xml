<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.d_dolive.reservation">

	<!-- 등록 -->
	<insert id="doInsert" parameterType="ReservVO">
		INSERT INTO reservation (									    
		    rno				
			, pcode			
			, maskCnt			
			, approval				
			, amount		
			, regId			
			, regDt			
			, modId			
			, modDt							                                      
		) VALUES (                                            
		    #{rno, jdbcType = VARCHAR} 
		    , #{pcode, jdbcType = VARCHAR}	                                                  
		    , #{maskCnt}                                                  
		    , #{approval, jdbcType = VARCHAR}                                                  
		    , #{amount}                                            
		    , #{regId, jdbcType = VARCHAR}                                                  
		    , SYSDATE                                      
		    , #{modId, jdbcType = VARCHAR}                                                  
		    , SYSDATE                                             
		) 
	</insert>
	
	<!-- 수정 -->
	<update id="doUpdate" parameterType="ReservVO">
		UPDATE reservation
		SET approval = #{approval, jdbcType = VARCHAR}  
		WHERE rno = #{rNo, jdbcType = VARCHAR}   
	</update>
	
	<!-- 단건 조회 -->
	<select id="doSelectOne" parameterType="ReservVO" resultType="ReservVO">
		SELECT							
    		t1.rNo,                   
		    t1.approval,              
		    t1.amount,                
		    t2.email,                 
		    t2.name,                  
		    t2.tel,                   
		    t2.addr,                  
		    t2.zipno                  
		FROM reservation t1, member t2
		WHERE t1.rNo = #{rNo, jdbcType = VARCHAR}              
		AND t1.regId = t2.email       
	</select>
  
</mapper>